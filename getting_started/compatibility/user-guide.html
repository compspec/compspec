<!DOCTYPE html>
<html data-content_root="../../" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="ie=edge" http-equiv="x-ua-compatible"/>
  <meta content="Copy to clipboard" name="lang:clipboard.copy"/>
  <meta content="Copied to clipboard" name="lang:clipboard.copied"/>
  <meta content="en" name="lang:search.language"/>
  <meta content="True" name="lang:search.pipeline.stopwords"/>
  <meta content="True" name="lang:search.pipeline.trimmer"/>
  <meta content="No matching documents" name="lang:search.result.none"/>
  <meta content="1 matching document" name="lang:search.result.one"/>
  <meta content="# matching documents" name="lang:search.result.other"/>
  <meta content="[\s\-]+" name="lang:search.tokenizer"/>
  <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&amp;display=fallback" rel="stylesheet"/>
  <style>
   body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
  </style>
  <link href="../../_static/stylesheets/application.css" rel="stylesheet"/>
  <link href="../../_static/stylesheets/application-palette.css" rel="stylesheet"/>
  <link href="../../_static/stylesheets/application-fixes.css" rel="stylesheet"/>
  <link href="../../_static/fonts/material-icons.css" rel="stylesheet"/>
  <meta content="#4051b5" name="theme-color"/>
  <script src="../../_static/javascripts/modernizr.js">
  </script>
  <link href="../../_static/images/compspec.png" rel="apple-touch-icon"/>
  <title>
   User Guide — Compspec Python
  </title>
  <link href="../../_static/pygments.css?v=75810a84" rel="stylesheet" type="text/css"/>
  <link href="../../_static/material.css?v=79c92029" rel="stylesheet" type="text/css"/>
  <link href="../../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
  <link href="../../_static/css/rtd_sphinx_search.min.css" rel="stylesheet" type="text/css"/>
  <link href="../../_static/custom.css?v=2e4958f2" rel="stylesheet" type="text/css"/>
  <script src="../../_static/documentation_options.js?v=0e525676">
  </script>
  <script src="../../_static/doctools.js?v=9bcbadda">
  </script>
  <script src="../../_static/sphinx_highlight.js?v=dc90522c">
  </script>
  <script src="../../_static/clipboard.min.js?v=a7894cd8">
  </script>
  <script src="../../_static/copybutton.js?v=f281be69">
  </script>
  <script src="../../_static/js/rtd_search_config.js">
  </script>
  <script src="../../_static/js/rtd_sphinx_search.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js">
  </script>
  <link href="../../_static/favicon.ico" rel="icon"/>
  <link href="../../genindex.html" rel="index" title="Index"/>
  <link href="../../search.html" rel="search" title="Search"/>
  <link href="../../contributing.html" rel="next" title="Contributing"/>
  <link href="index.html" rel="prev" title="Container and Application Compatibility"/>
  <!-- Social: Facebook / Open Graph -->
  <title>
   Compspec: compatibility checking for applications and containers and things
  </title>
  <link href="https://github.com/compspec" rel="canonical"/>
  <meta content="website" property="og:type"/>
  <meta content="https://github.com/compspec" property="og:url"/>
  <meta content="Compspec" property="og:title"/>
  <meta content="https://raw.githubusercontent.com/compspec/spec/main/img/compspec-circle.png" property="og:image"/>
  <meta content="Compspec" property="og:description"/>
  <meta content="Compspec" property="og:site_name"/>
  <meta content="en_US" property="og:locale"/>
  <!-- Social: Twitter -->
  <meta content="summary" name="twitter:card"/>
  <meta content="@vsoch" name="twitter:site"/>
  <meta content="Vanessasaurus" name="twitter:title"/>
  <meta content="Compspec" name="twitter:description"/>
  <meta content="https://raw.githubusercontent.com/compspec/spec/main/img/compspec-circle.png" name="twitter:image"/>
  <!-- Social: Google+ / Schema.org  -->
  <meta content="Compspec" itemprop="name"/>
  <meta content="Compspec" itemprop="description"/>
  <meta content="https://raw.githubusercontent.com/compspec/spec/main/img/compspec-circle.png" itemprop="image"/>
  <script type="application/ld+json">
   {"@type":"WebSite","headline":"Compspec","url":"https://github.com/compspec","description":"Compspec: compatibility checking for applications and containers and things","name":"Compspec","@context":"https://schema.org"}
  </script>
  <link href="../../_static/images/compspec.png" rel="apple-touch-icon"/>
 </head>
 <body data-md-color-accent="cyan" data-md-color-primary="indigo" dir="ltr">
  <svg class="md-svg">
   <defs data-children-count="0">
    <svg height="448" id="__github" viewbox="0 0 416 448" width="416" xmlns="http://www.w3.org/2000/svg">
     <path d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z" fill="currentColor">
     </path>
    </svg>
   </defs>
  </svg>
  <input class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
  <input class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
  <label class="md-overlay" data-md-component="overlay" for="__drawer">
  </label>
  <a class="md-skip" href="#getting_started/compatibility/user-guide" tabindex="1">
   Skip to content
  </a>
  <header class="md-header" data-md-component="header">
   <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
     <div class="md-flex__cell md-flex__cell--shrink">
      <a class="md-header-nav__button md-logo" href="../../index.html" title="Compspec Python">
       <i class="md-icon">
        
       </i>
      </a>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer">
      </label>
     </div>
     <div class="md-flex__cell md-flex__cell--stretch">
      <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
       <span class="md-header-nav__topic">
        Compspec Python
       </span>
       <span class="md-header-nav__topic">
        User Guide
       </span>
      </div>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <label class="md-icon md-icon--search md-header-nav__button" for="__search">
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
       <label class="md-search__overlay" for="__search">
       </label>
       <div class="md-search__inner" role="search">
        <form action="../../search.html" class="md-search__form" method="get" name="search">
         <input autocapitalize="off" autocomplete="off" class="md-search__input" data-md-component="query" data-md-state="active" name="q" placeholder="" search="" spellcheck="false" type="text"/>
         <label class="md-icon md-search__icon" for="__search">
         </label>
         <button class="md-icon md-search__icon" data-md-component="reset" tabindex="-1" type="reset">
          
         </button>
        </form>
        <div class="md-search__output">
         <div class="md-search__scrollwrap" data-md-scrollfix="">
          <div class="md-search-result" data-md-component="result">
           <div class="md-search-result__meta">
            Type to start searching
           </div>
           <ol class="md-search-result__list">
           </ol>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <div class="md-header-nav__source">
       <a class="md-source" data-md-source="github" href="https://github.com/compspec/compspec/" title="Go to repository">
        <div class="md-source__icon">
         <!--<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>-->
         <!-- updated to match riverml.xml site-->
         <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
          <path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z" fill="#ffffff">
          </path>
         </svg>
        </div>
        <div class="md-source__repository">
         Compspec Python
        </div>
       </a>
      </div>
     </div>
    </div>
   </nav>
  </header>
  <div class="md-container">
   <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
     <ul class="md-tabs__list">
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://github.com/compspec/spec">
        Specification
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://github.com/compspec">
        Compspec Organization on GitHub
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://github.com/compspec/compspec">
        Compspec Python on GitHub
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="../index.html">
        Getting Started
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="index.html">
        Container and Application Compatibility
       </a>
      </li>
     </ul>
    </div>
   </nav>
   <main class="md-main">
    <div class="md-main__inner md-grid" data-md-component="container">
     <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
      <div class="md-sidebar__scrollwrap">
       <div class="md-sidebar__inner">
        <nav class="md-nav md-nav--primary" data-md-level="0">
         <label class="md-nav__title md-nav__title--site" for="__drawer">
          <a class="md-nav__button md-logo" href="../../index.html" title="Compspec Python">
           <i class="md-icon">
            
           </i>
          </a>
          <a href="../../index.html" title="Compspec Python">
           Compspec Python
          </a>
         </label>
         <div class="md-nav__source">
          <a class="md-source" data-md-source="github" href="https://github.com/compspec/compspec/" title="Go to repository">
           <div class="md-source__icon">
            <!--<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>-->
            <!-- updated to match riverml.xml site-->
            <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
             <path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z" fill="#ffffff">
             </path>
            </svg>
           </div>
           <div class="md-source__repository">
            Compspec Python
           </div>
          </a>
         </div>
         <ul class="md-nav__list">
          <li class="md-nav__item">
           <span class="md-nav__link caption">
            <span class="caption-text">
             Documentation
            </span>
           </span>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../index.html">
            Getting Started
           </a>
           <ul class="md-nav__list">
            <li class="md-nav__item">
             <a class="md-nav__link" href="../installation.html">
              Installation
             </a>
            </li>
            <li class="md-nav__item">
             <a class="md-nav__link" href="../asp/index.html">
              ASP Compatibility
             </a>
            </li>
            <li class="md-nav__item">
             <a class="md-nav__link" href="index.html">
              Container and Application Compatibility
             </a>
            </li>
           </ul>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../../contributing.html">
            Contributing
           </a>
          </li>
          <li class="md-nav__item">
           <span class="md-nav__link caption">
            <span class="caption-text">
             API
            </span>
           </span>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../../source/modules.html">
            compspec
           </a>
          </li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
     <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
      <div class="md-sidebar__scrollwrap">
       <div class="md-sidebar__inner">
        <nav class="md-nav md-nav--secondary">
         <label class="md-nav__title" for="__toc">
          "Contents"
         </label>
         <ul class="md-nav__list" data-md-scrollfix="">
          <li class="md-nav__item">
           <a class="md-nav__link" href="#getting-started-compatibility-user-guide--page-root">
            User Guide
           </a>
           <nav class="md-nav">
            <ul class="md-nav__list">
             <li class="md-nav__item">
              <a class="md-nav__link" href="#example-with-ior">
               Example with IOR
              </a>
             </li>
             <li class="md-nav__item">
              <a class="md-nav__link" href="#writing-a-plugin">
               Writing a Plugin
              </a>
              <nav class="md-nav">
               <ul class="md-nav__list">
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#naming">
                  Naming
                 </a>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#organization">
                  Organization
                 </a>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#your-module">
                  Your Module
                 </a>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#plugin-design">
                  Plugin Design
                 </a>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#testing">
                  Testing
                 </a>
                </li>
               </ul>
              </nav>
             </li>
            </ul>
           </nav>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__extra_link" href="../../_sources/getting_started/compatibility/user-guide.rst.txt">
            Show Source
           </a>
          </li>
          <li class="md-nav__item" id="searchbox">
          </li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
     <div class="md-content">
      <article class="md-content__inner md-typeset" role="main">
       <section id="user-guide">
        <span id="getting-started-abi-user-guide">
        </span>
        <h1 id="getting-started-compatibility-user-guide--page-root">
         User Guide
         <a class="headerlink" href="#getting-started-compatibility-user-guide--page-root" title="Link to this heading">
          ¶
         </a>
        </h1>
        <p>
         Compspec provides a plugin-based strategy to extract metadata about some application or environment.
This can include compatibility metadata about an application, or a graph of subsystem metadata about a resource like software,
network, or similar. We currently support the following extractor plugins:
        </p>
        <blockquote>
         <div>
          <ul class="simple">
           <li>
            <p>
             <a class="reference external" href="https://github.com/compspec/compspec-ior">
              compspec-ior
             </a>
             : for I/O metadata
            </p>
           </li>
           <li>
            <p>
             <a class="reference external" href="https://github.com/compspec/compspec-spack">
              compspec-spack
             </a>
             : for a spack software subsystem graph
            </p>
           </li>
           <li>
            <p>
             <a class="reference external" href="https://github.com/compspec/compspec-flux">
              compspec-flux
             </a>
             : for Flux resource graphs
            </p>
           </li>
          </ul>
         </div>
        </blockquote>
        <p>
         If you haven’t read
         <a class="reference internal" href="../installation.html#getting-started-installation">
          <span class="std std-ref">
           Installation
          </span>
         </a>
         you should do that first.
We will give an example in the context of using IOR.
        </p>
        <section id="example-with-ior">
         <h2 id="example-with-ior">
          Example with IOR
          <a class="headerlink" href="#example-with-ior" title="Link to this heading">
           ¶
          </a>
         </h2>
         <p>
          After installing both:
         </p>
         <div class="highlight-console notranslate">
          <div class="highlight">
           <pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>compspec
<span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>compspec-ior
</pre>
          </div>
         </div>
         <p>
          You likely want to do an extractor. The general command looks like this:
         </p>
         <div class="highlight-console notranslate">
          <div class="highlight">
           <pre><span></span><span class="gp">$ </span>compspec<span class="w"> </span>extract<span class="w"> </span>&lt;name&gt;<span class="w"> </span>&lt;options&gt;
</pre>
          </div>
         </div>
         <p>
          For example, with IOR (using defaults):
         </p>
         <div class="highlight-console notranslate">
          <div class="highlight">
           <pre><span></span><span class="gp">$ </span>compspec<span class="w"> </span>extract<span class="w"> </span>ior
</pre>
          </div>
         </div>
         <p>
          And you can add additional arguments for IOR at the end of the line instead of using the defaults.
An extractor can also have custom arguments. If you want to load from file, for example.
         </p>
         <div class="highlight-console notranslate">
          <div class="highlight">
           <pre><span></span><span class="gp">$ </span>compspec<span class="w"> </span>extract<span class="w"> </span>ior<span class="w"> </span>--ior-load<span class="w"> </span>ior-data.json
</pre>
          </div>
         </div>
         <p>
          Or if you want to save the compatibility json to file:
         </p>
         <div class="highlight-console notranslate">
          <div class="highlight">
           <pre><span></span><span class="gp">$ </span>compspec<span class="w"> </span>extract<span class="w"> </span>--outfile<span class="w"> </span>test.json<span class="w"> </span>ior
</pre>
          </div>
         </div>
         <p>
          We will have more documentation as the library is developed. For example, we will eventually
be able to package and push to registries with ORAS.
         </p>
        </section>
        <section id="writing-a-plugin">
         <h2 id="writing-a-plugin">
          Writing a Plugin
          <a class="headerlink" href="#writing-a-plugin" title="Link to this heading">
           ¶
          </a>
         </h2>
         <section id="naming">
          <h3 id="naming">
           Naming
           <a class="headerlink" href="#naming" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           Here are some early tips to writing plugins.
          </p>
          <blockquote>
           <div>
            <ul class="simple">
             <li>
              <p>
               Your plugin name should be
               <code class="docutils literal notranslate">
                <span class="pre">
                 compspec-&lt;name&gt;
                </span>
               </code>
               (for the repository / pypi package) and the module name
               <code class="docutils literal notranslate">
                <span class="pre">
                 compspec_&lt;name&gt;
                </span>
               </code>
              </p>
             </li>
             <li>
              <p>
               If you’d like to be under the compspec org please open an issue on any repository, we’d love to have you!
              </p>
             </li>
            </ul>
           </div>
          </blockquote>
         </section>
         <section id="organization">
          <h3 id="organization">
           Organization
           <a class="headerlink" href="#organization" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           A plugin typically has the following structure:
          </p>
          <div class="highlight-console notranslate">
           <div class="highlight">
            <pre><span></span><span class="go">├── CHANGELOG.md</span>
<span class="go">├── compspec_ior</span>
<span class="go">│   ├── defaults.py</span>
<span class="go">│   ├── __init__.py</span>
<span class="go">│   ├── plugin.py</span>
<span class="go">│   ├── schema.json</span>
<span class="go">│   └── version.py</span>
<span class="go">├── LICENSE</span>
<span class="go">├── MANIFEST.in</span>
<span class="go">├── pyproject.toml</span>
<span class="go">├── pytest.ini</span>
<span class="go">├── README.md</span>
<span class="go">├── setup.cfg</span>
<span class="go">└── setup.py</span>
</pre>
           </div>
          </div>
          <p>
           Of course the testing setup is up to you, but we recommend pytest and linting, etc.
          </p>
         </section>
         <section id="your-module">
          <h3 id="your-module">
           Your Module
           <a class="headerlink" href="#your-module" title="Link to this heading">
            ¶
           </a>
          </h3>
          <ul class="simple">
           <li>
            <p>
             In the
             <code class="docutils literal notranslate">
              <span class="pre">
               __init__.py
              </span>
             </code>
             you are required to have a
             <code class="docutils literal notranslate">
              <span class="pre">
               Plugin
              </span>
             </code>
             that can be imported, which should be your subclass of
             <code class="docutils literal notranslate">
              <span class="pre">
               PluginBase
              </span>
             </code>
             (described below)
            </p>
           </li>
           <li>
            <p>
             In the “defaults.py” you must define:
- a
             <strong>
              namespace
             </strong>
             for your plugin (e.g., io.compspec.ior, it is typically like a URL but backwards)
- a
             <strong>
              version
             </strong>
             for your schema
- a
             <strong>
              schema_url
             </strong>
             (raw GitHub URL) where you can programmatically access the schema
            </p>
           </li>
          </ul>
          <p>
           All of the above, and your plugin structure, are validated.
          </p>
         </section>
         <section id="plugin-design">
          <h3 id="plugin-design">
           Plugin Design
           <a class="headerlink" href="#plugin-design" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           The plugin should use the
           <code class="docutils literal notranslate">
            <span class="pre">
             compspec.plugins.PluginBase
            </span>
           </code>
           class. It should define the following class attributes:
          </p>
          <div class="highlight-python notranslate">
           <div class="highlight">
            <pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Plugin</span><span class="p">(</span><span class="n">PluginBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    The IOR extractor plugin</span>
<span class="sd">    """</span>

    <span class="c1"># These metadata fields are required (and checked for)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">"IOR parallel I/O benchmarks"</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">namespace</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">spec_version</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">schema_url</span>
</pre>
           </div>
          </div>
          <p>
           Those are all validated when your plugin is loaded into the registry, and it will fail with an error if you forget one.
You should next provide a custom parser that has any special arguments / options you want to appear on the compspec command line.
Make sure to namespace them according to your plugin. That might look like this (note it accepts the subparser as an argument):
          </p>
          <div class="highlight-python notranslate">
           <div class="highlight">
            <pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">add_arguments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subparser</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Add arguments for the plugin to show up in argparse</span>
<span class="sd">    """</span>
    <span class="n">ior</span> <span class="o">=</span> <span class="n">subparser</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">formatter_class</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">RawTextHelpFormatter</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Ensure these are namespaced to your plugin</span>
    <span class="n">ior</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">"ior_args"</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">"Arguments for IOR (defaults to reasonable set if not defined)"</span><span class="p">,</span>
        <span class="n">nargs</span><span class="o">=</span><span class="s2">"*"</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ior</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">"--ior-load"</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s2">"ior_load"</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">"Load metadata from this file instead of extraction from system directly."</span><span class="p">,</span>
    <span class="p">)</span>
</pre>
           </div>
          </div>
          <p>
           You don’t need to return anything - by adding to the subparser, it will stick.
You should also provide an “extract” function that takes “args” and “extra” expected from compspec. Your arguments will be available too.
          </p>
          <blockquote>
           <div>
            <ul class="simple">
             <li>
              <p>
               This function should return key/value pairs of your metadata.
              </p>
             </li>
             <li>
              <p>
               You do not need to namespace them, that will be done for you.
              </p>
             </li>
            </ul>
           </div>
          </blockquote>
          <div class="highlight-python notranslate">
           <div class="highlight">
            <pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">extract</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">extra</span><span class="p">):</span>
<span class="w">    </span><span class="sd">"""</span>
<span class="sd">    Run IOR and map metadata into compspec schema.</span>
<span class="sd">    """</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"field.a"</span><span class="p">:</span> <span class="s2">"a"</span><span class="p">,</span> <span class="s2">"field.b"</span><span class="p">:</span> <span class="s2">"b"</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">meta</span>
</pre>
           </div>
          </div>
          <p>
           It’s entirely up to you how you want to implement this! For IOR, by default we assume running IOR (with user specific command line options).
But we also provide an
           <code class="docutils literal notranslate">
            <span class="pre">
             --ior-load
            </span>
           </code>
           parameter that the user can specify to just load pre-generated data from file. As a design strategy, we
expose the function to parse this metadata into a flat list of attributes as a courtesy function, in case it is useful outside of using compspec.
Finally, you might want to provide an “in Python” example for using your plugin.
          </p>
         </section>
         <section id="testing">
          <h3 id="testing">
           Testing
           <a class="headerlink" href="#testing" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           We provide
           <a class="reference external" href="https://github.com/compspec/actions">
            GitHub actions
           </a>
           that you can use to validate your plugin schema. For example:
          </p>
          <div class="highlight-yaml notranslate">
           <div class="highlight">
            <pre><span></span><span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">validate-schema</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Validate schema</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout Repository</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Validate Schema</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compspec/actions/validate-schema@main</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">schema</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./compspec_myname/schema.json</span>
</pre>
           </div>
          </div>
          <p>
           You should also provide tests that validate installing and using your plugin with compspec.
As an example, this installs both, runs compspec with a few different configurations, and then runs
an “in Python” example that doesn’t rely on the compspec command line utility:
          </p>
          <div class="highlight-yaml notranslate">
           <div class="highlight">
            <pre><span></span><span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test IOR</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout Repository</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install compspec</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip install compspec</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install compspec-ior</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip install .</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test with loading data</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">compspec extract ior --ior-load ./examples/test/ior-data.json</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test Python</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python ./examples/singleton-run.py</span>
</pre>
           </div>
          </div>
          <p>
           For all of the above, you can see
           <a class="reference external" href="https://github.com/compspec/compspec-ior">
            compspec-ior
           </a>
           as an example.
          </p>
         </section>
        </section>
       </section>
      </article>
     </div>
    </div>
   </main>
  </div>
  <footer class="md-footer">
   <div class="md-footer-nav">
    <nav class="md-footer-nav__inner md-grid">
     <a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="index.html" rel="prev" title="Container and Application Compatibility">
      <div class="md-flex__cell md-flex__cell--shrink">
       <i class="md-icon md-icon--arrow-back md-footer-nav__button">
       </i>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
       <span class="md-flex__ellipsis">
        <span class="md-footer-nav__direction">
         "Previous"
        </span>
        Container and Application Compatibility
       </span>
      </div>
     </a>
     <a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="../../contributing.html" rel="next" title="Contributing">
      <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
       <span class="md-flex__ellipsis">
        <span class="md-footer-nav__direction">
         "Next"
        </span>
        Contributing
       </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
       <i class="md-icon md-icon--arrow-forward md-footer-nav__button">
       </i>
      </div>
     </a>
    </nav>
   </div>
   <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
     <div class="md-footer-copyright">
      <div class="md-footer-copyright__highlight">
       © Copyright 2022-2024, Vanessa Sochat.
      </div>
      Last updated on
              Apr 04, 2025.
      <br/>
      Created using
      <a href="http://www.sphinx-doc.org/">
       Sphinx
      </a>
      8.1.3.
             and
      <a href="https://github.com/bashtage/sphinx-material/">
       Material for
              Sphinx
      </a>
     </div>
    </div>
   </div>
  </footer>
  <script src="../../_static/javascripts/application.js">
  </script>
  <script>
   app.initialize({version: "1.0.4", url: {base: ".."}})
  </script>
 </body>
</html>
