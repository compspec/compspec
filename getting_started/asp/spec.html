<!DOCTYPE html>
<html data-content_root="../../" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <meta content="width=device-width,initial-scale=1" name="viewport"/>
  <meta content="ie=edge" http-equiv="x-ua-compatible"/>
  <meta content="Copy to clipboard" name="lang:clipboard.copy"/>
  <meta content="Copied to clipboard" name="lang:clipboard.copied"/>
  <meta content="en" name="lang:search.language"/>
  <meta content="True" name="lang:search.pipeline.stopwords"/>
  <meta content="True" name="lang:search.pipeline.trimmer"/>
  <meta content="No matching documents" name="lang:search.result.none"/>
  <meta content="1 matching document" name="lang:search.result.one"/>
  <meta content="# matching documents" name="lang:search.result.other"/>
  <meta content="[\s\-]+" name="lang:search.tokenizer"/>
  <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&amp;display=fallback" rel="stylesheet"/>
  <style>
   body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
  </style>
  <link href="../../_static/stylesheets/application.css" rel="stylesheet"/>
  <link href="../../_static/stylesheets/application-palette.css" rel="stylesheet"/>
  <link href="../../_static/stylesheets/application-fixes.css" rel="stylesheet"/>
  <link href="../../_static/fonts/material-icons.css" rel="stylesheet"/>
  <meta content="#4051b5" name="theme-color"/>
  <script src="../../_static/javascripts/modernizr.js">
  </script>
  <link href="../../_static/images/compspec.png" rel="apple-touch-icon"/>
  <title>
   Composition Spec — Compspec Python
  </title>
  <link href="../../_static/pygments.css?v=83e35b93" rel="stylesheet" type="text/css"/>
  <link href="../../_static/material.css?v=79c92029" rel="stylesheet" type="text/css"/>
  <link href="../../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
  <link href="../../_static/css/rtd_sphinx_search.min.css" rel="stylesheet" type="text/css"/>
  <link href="../../_static/custom.css?v=2e4958f2" rel="stylesheet" type="text/css"/>
  <script src="../../_static/documentation_options.js?v=0e525676">
  </script>
  <script src="../../_static/doctools.js?v=9a2dae69">
  </script>
  <script src="../../_static/sphinx_highlight.js?v=dc90522c">
  </script>
  <script src="../../_static/clipboard.min.js?v=a7894cd8">
  </script>
  <script src="../../_static/copybutton.js?v=f281be69">
  </script>
  <script src="../../_static/js/rtd_search_config.js">
  </script>
  <script src="../../_static/js/rtd_sphinx_search.min.js">
  </script>
  <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js">
  </script>
  <link href="../../_static/favicon.ico" rel="icon"/>
  <link href="../../genindex.html" rel="index" title="Index"/>
  <link href="../../search.html" rel="search" title="Search"/>
  <link href="../compatibility/index.html" rel="next" title="Container and Application Compatibility"/>
  <link href="user-guide.html" rel="prev" title="User Guide"/>
  <!-- Social: Facebook / Open Graph -->
  <title>
   Compspec: compatibility checking for applications and containers and things
  </title>
  <link href="https://github.com/compspec" rel="canonical"/>
  <meta content="website" property="og:type"/>
  <meta content="https://github.com/compspec" property="og:url"/>
  <meta content="Compspec" property="og:title"/>
  <meta content="https://raw.githubusercontent.com/compspec/spec/main/img/compspec-circle.png" property="og:image"/>
  <meta content="Compspec" property="og:description"/>
  <meta content="Compspec" property="og:site_name"/>
  <meta content="en_US" property="og:locale"/>
  <!-- Social: Twitter -->
  <meta content="summary" name="twitter:card"/>
  <meta content="@vsoch" name="twitter:site"/>
  <meta content="Vanessasaurus" name="twitter:title"/>
  <meta content="Compspec" name="twitter:description"/>
  <meta content="https://raw.githubusercontent.com/compspec/spec/main/img/compspec-circle.png" name="twitter:image"/>
  <!-- Social: Google+ / Schema.org  -->
  <meta content="Compspec" itemprop="name"/>
  <meta content="Compspec" itemprop="description"/>
  <meta content="https://raw.githubusercontent.com/compspec/spec/main/img/compspec-circle.png" itemprop="image"/>
  <script type="application/ld+json">
   {"@type":"WebSite","headline":"Compspec","url":"https://github.com/compspec","description":"Compspec: compatibility checking for applications and containers and things","name":"Compspec","@context":"https://schema.org"}
  </script>
  <link href="../../_static/images/compspec.png" rel="apple-touch-icon"/>
 </head>
 <body data-md-color-accent="cyan" data-md-color-primary="indigo" dir="ltr">
  <svg class="md-svg">
   <defs data-children-count="0">
    <svg height="448" id="__github" viewbox="0 0 416 448" width="416" xmlns="http://www.w3.org/2000/svg">
     <path d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z" fill="currentColor">
     </path>
    </svg>
   </defs>
  </svg>
  <input class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
  <input class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
  <label class="md-overlay" data-md-component="overlay" for="__drawer">
  </label>
  <a class="md-skip" href="#getting_started/asp/spec" tabindex="1">
   Skip to content
  </a>
  <header class="md-header" data-md-component="header">
   <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
     <div class="md-flex__cell md-flex__cell--shrink">
      <a class="md-header-nav__button md-logo" href="../../index.html" title="Compspec Python">
       <i class="md-icon">
        
       </i>
      </a>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer">
      </label>
     </div>
     <div class="md-flex__cell md-flex__cell--stretch">
      <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
       <span class="md-header-nav__topic">
        Compspec Python
       </span>
       <span class="md-header-nav__topic">
        Composition Spec
       </span>
      </div>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <label class="md-icon md-icon--search md-header-nav__button" for="__search">
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
       <label class="md-search__overlay" for="__search">
       </label>
       <div class="md-search__inner" role="search">
        <form action="../../search.html" class="md-search__form" method="get" name="search">
         <input autocapitalize="off" autocomplete="off" class="md-search__input" data-md-component="query" data-md-state="active" name="q" placeholder="" search="" spellcheck="false" type="text"/>
         <label class="md-icon md-search__icon" for="__search">
         </label>
         <button class="md-icon md-search__icon" data-md-component="reset" tabindex="-1" type="reset">
          
         </button>
        </form>
        <div class="md-search__output">
         <div class="md-search__scrollwrap" data-md-scrollfix="">
          <div class="md-search-result" data-md-component="result">
           <div class="md-search-result__meta">
            Type to start searching
           </div>
           <ol class="md-search-result__list">
           </ol>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div>
     <div class="md-flex__cell md-flex__cell--shrink">
      <div class="md-header-nav__source">
       <a class="md-source" data-md-source="github" href="https://github.com/compspec/compspec/" title="Go to repository">
        <div class="md-source__icon">
         <!--<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>-->
         <!-- updated to match riverml.xml site-->
         <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
          <path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z" fill="#ffffff">
          </path>
         </svg>
        </div>
        <div class="md-source__repository">
         Compspec Python
        </div>
       </a>
      </div>
     </div>
    </div>
   </nav>
  </header>
  <div class="md-container">
   <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
     <ul class="md-tabs__list">
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://github.com/compspec/spec">
        Specification
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://github.com/compspec">
        Compspec Organization on GitHub
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="https://github.com/compspec/compspec">
        Compspec Python on GitHub
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="../index.html">
        Getting Started
       </a>
      </li>
      <li class="md-tabs__item">
       <a class="md-tabs__link" href="index.html">
        ASP Compatibility
       </a>
      </li>
     </ul>
    </div>
   </nav>
   <main class="md-main">
    <div class="md-main__inner md-grid" data-md-component="container">
     <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
      <div class="md-sidebar__scrollwrap">
       <div class="md-sidebar__inner">
        <nav class="md-nav md-nav--primary" data-md-level="0">
         <label class="md-nav__title md-nav__title--site" for="__drawer">
          <a class="md-nav__button md-logo" href="../../index.html" title="Compspec Python">
           <i class="md-icon">
            
           </i>
          </a>
          <a href="../../index.html" title="Compspec Python">
           Compspec Python
          </a>
         </label>
         <div class="md-nav__source">
          <a class="md-source" data-md-source="github" href="https://github.com/compspec/compspec/" title="Go to repository">
           <div class="md-source__icon">
            <!--<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width="28" height="28">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>-->
            <!-- updated to match riverml.xml site-->
            <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg">
             <path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z" fill="#ffffff">
             </path>
            </svg>
           </div>
           <div class="md-source__repository">
            Compspec Python
           </div>
          </a>
         </div>
         <ul class="md-nav__list">
          <li class="md-nav__item">
           <span class="md-nav__link caption">
            <span class="caption-text">
             Documentation
            </span>
           </span>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../index.html">
            Getting Started
           </a>
           <ul class="md-nav__list">
            <li class="md-nav__item">
             <a class="md-nav__link" href="../installation.html">
              Installation
             </a>
            </li>
            <li class="md-nav__item">
             <a class="md-nav__link" href="index.html">
              ASP Compatibility
             </a>
            </li>
            <li class="md-nav__item">
             <a class="md-nav__link" href="../compatibility/index.html">
              Container and Application Compatibility
             </a>
            </li>
           </ul>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../../contributing.html">
            Contributing
           </a>
          </li>
          <li class="md-nav__item">
           <span class="md-nav__link caption">
            <span class="caption-text">
             API
            </span>
           </span>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__link" href="../../source/modules.html">
            compspec
           </a>
          </li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
     <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
      <div class="md-sidebar__scrollwrap">
       <div class="md-sidebar__inner">
        <nav class="md-nav md-nav--secondary">
         <label class="md-nav__title" for="__toc">
          "Contents"
         </label>
         <ul class="md-nav__list" data-md-scrollfix="">
          <li class="md-nav__item">
           <a class="md-nav__link" href="#getting-started-asp-spec--page-root">
            Composition Spec
           </a>
           <nav class="md-nav">
            <ul class="md-nav__list">
             <li class="md-nav__item">
              <a class="md-nav__link" href="#goals">
               Goals
              </a>
             </li>
             <li class="md-nav__item">
              <a class="md-nav__link" href="#definitions">
               Definitions
              </a>
              <nav class="md-nav">
               <ul class="md-nav__list">
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#entity">
                  Entity
                 </a>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#namespace">
                  Namespace
                 </a>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#facts">
                  Facts
                 </a>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#corpus">
                  Corpus
                 </a>
                </li>
               </ul>
              </nav>
             </li>
             <li class="md-nav__item">
              <a class="md-nav__link" href="#procedures">
               Procedures
              </a>
              <nav class="md-nav">
               <ul class="md-nav__list">
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#extract">
                  Extract
                 </a>
                 <nav class="md-nav">
                  <ul class="md-nav__list">
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#domain">
                     Domain
                    </a>
                   </li>
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#node">
                     Node
                    </a>
                   </li>
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#relation">
                     Relation
                    </a>
                   </li>
                  </ul>
                 </nav>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#diff">
                  Diff
                 </a>
                 <nav class="md-nav">
                  <ul class="md-nav__list">
                   <li class="md-nav__item">
                    <a class="md-nav__link" href="#rules">
                     Rules
                    </a>
                    <nav class="md-nav">
                     <ul class="md-nav__list">
                      <li class="md-nav__item">
                       <a class="md-nav__link" href="#assertion-of-difference">
                        Assertion of Difference
                       </a>
                      </li>
                      <li class="md-nav__item">
                       <a class="md-nav__link" href="#changed-node-values">
                        Changed Node Values
                       </a>
                      </li>
                      <li class="md-nav__item">
                       <a class="md-nav__link" href="#removed-nodes">
                        Removed Nodes
                       </a>
                      </li>
                      <li class="md-nav__item">
                       <a class="md-nav__link" href="#added-nodes">
                        Added Nodes
                       </a>
                      </li>
                     </ul>
                    </nav>
                   </li>
                  </ul>
                 </nav>
                </li>
                <li class="md-nav__item">
                 <a class="md-nav__link" href="#implementation">
                  Implementation
                 </a>
                </li>
               </ul>
              </nav>
             </li>
            </ul>
           </nav>
          </li>
          <li class="md-nav__item">
           <a class="md-nav__extra_link" href="../../_sources/getting_started/asp/spec.md.txt">
            Show Source
           </a>
          </li>
          <li class="md-nav__item" id="searchbox">
          </li>
         </ul>
        </nav>
       </div>
      </div>
     </div>
     <div class="md-content">
      <article class="md-content__inner md-typeset" role="main">
       <section id="composition-spec">
        <h1 id="getting-started-asp-spec--page-root">
         Composition Spec
         <a class="headerlink" href="#getting-started-asp-spec--page-root" title="Link to this heading">
          ¶
         </a>
        </h1>
        <ul class="simple">
         <li>
          <p>
           <a class="reference internal" href="#goals">
            <span class="std std-ref">
             Goals
            </span>
           </a>
          </p>
         </li>
         <li>
          <p>
           <a class="reference internal" href="#definitions">
            <span class="std std-ref">
             Definitions
            </span>
           </a>
          </p>
          <ul>
           <li>
            <p>
             <a class="reference internal" href="#entity">
              <span class="std std-ref">
               Entity
              </span>
             </a>
            </p>
           </li>
           <li>
            <p>
             <a class="reference internal" href="#namespace">
              <span class="std std-ref">
               Namespace
              </span>
             </a>
            </p>
           </li>
           <li>
            <p>
             <a class="reference internal" href="#facts">
              <span class="std std-ref">
               Facts
              </span>
             </a>
            </p>
           </li>
           <li>
            <p>
             <a class="reference internal" href="#corpus">
              <span class="std std-ref">
               Corpus
              </span>
             </a>
            </p>
           </li>
          </ul>
         </li>
         <li>
          <p>
           <a class="reference internal" href="#procedures">
            <span class="std std-ref">
             Procedures
            </span>
           </a>
          </p>
          <ul>
           <li>
            <p>
             <a class="reference internal" href="#extract">
              <span class="std std-ref">
               Extract
              </span>
             </a>
            </p>
            <ul>
             <li>
              <p>
               <a class="reference internal" href="#domain">
                <span class="std std-ref">
                 Domain
                </span>
               </a>
              </p>
             </li>
             <li>
              <p>
               <a class="reference internal" href="#node">
                <span class="std std-ref">
                 Node
                </span>
               </a>
              </p>
             </li>
             <li>
              <p>
               <a class="reference internal" href="#relation">
                <span class="std std-ref">
                 Relation
                </span>
               </a>
              </p>
             </li>
            </ul>
           </li>
           <li>
            <p>
             <a class="reference internal" href="#diff">
              <span class="std std-ref">
               Diff
              </span>
             </a>
            </p>
            <ul>
             <li>
              <p>
               <a class="reference internal" href="#rules">
                <span class="std std-ref">
                 Rules
                </span>
               </a>
              </p>
             </li>
            </ul>
           </li>
          </ul>
         </li>
        </ul>
        <section id="goals">
         <h2 id="goals">
          Goals
          <a class="headerlink" href="#goals" title="Link to this heading">
           ¶
          </a>
         </h2>
         <p>
          The Composition Specification aims to provide simple procedures, models, and implementations
for comparing compositions.
         </p>
        </section>
        <section id="definitions">
         <h2 id="definitions">
          Definitions
          <a class="headerlink" href="#definitions" title="Link to this heading">
           ¶
          </a>
         </h2>
         <section id="entity">
          <h3 id="entity">
           Entity
           <a class="headerlink" href="#entity" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           An entity is a digital or physical object that be represented by nodes an relationships.
Examples in computer science include libraries and binaries. An entity typically
has one or more of each of nodes and relationships, all of which exist under a namespace.
          </p>
         </section>
         <section id="namespace">
          <h3 id="namespace">
           Namespace
           <a class="headerlink" href="#namespace" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           A namespace is generally a named scope under which unique identifiers are comparable.
As an example, if we have two versions of the same function “hello-world” (versions A and B)
in different libraries, all references for within each can be thought of as within the namespaces
A and B. E.g.,:
          </p>
          <div class="highlight-python notranslate">
           <div class="highlight">
            <pre><span></span><span class="n">A</span><span class="o">.</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span>
<span class="n">B</span><span class="o">.</span><span class="n">hello</span><span class="o">-</span><span class="n">world</span>
</pre>
           </div>
          </div>
          <p>
           And children of these abstract entities will inherit the namespace. This also means
that both namespaces could have overlapping identifiers, however they are not meaningful
in context of on another, e.g.,
           <code class="docutils literal notranslate">
            <span class="pre">
             A.id0
            </span>
           </code>
           !=
           <code class="docutils literal notranslate">
            <span class="pre">
             A.id1
            </span>
           </code>
           .
          </p>
         </section>
         <section id="facts">
          <h3 id="facts">
           Facts
           <a class="headerlink" href="#facts" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           Facts are sets of logical statements about an entity. Under compspec, facts can be one
of two types:
          </p>
          <ul class="simple">
           <li>
            <p>
             <strong>
              node
             </strong>
             : a node represents an object or attribute
            </p>
           </li>
           <li>
            <p>
             <strong>
              relation
             </strong>
             : a relation is a relationship between facts, with an optional identifier for a type of relationship that defaults to “has” to indicate a parent “has” a child of some kind.
            </p>
           </li>
          </ul>
          <p>
           In this context, by default the relation type is “has” and the direction of relationship
flows from parent to child.
          </p>
         </section>
         <section id="corpus">
          <h3 id="corpus">
           Corpus
           <a class="headerlink" href="#corpus" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           A corpus is a collection of facts about an entity.
          </p>
         </section>
        </section>
        <section id="procedures">
         <h2 id="procedures">
          Procedures
          <a class="headerlink" href="#procedures" title="Link to this heading">
           ¶
          </a>
         </h2>
         <p>
          The composition specification currently defines two kinds of procedures,
extraction and diff.
         </p>
         <section id="extract">
          <h3 id="extract">
           Extract
           <a class="headerlink" href="#extract" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           Given an entity, we can perform some extraction to derive a list of facts.
          </p>
          <div class="highlight-default notranslate">
           <div class="highlight">
            <pre><span></span><span class="p">[</span><span class="n">entity</span><span class="p">]</span> <span class="o">--</span> <span class="n">extraction</span> <span class="o">--&gt;</span> <span class="p">[</span><span class="n">facts</span><span class="p">]</span>
</pre>
           </div>
          </div>
          <p>
           This initial step of loading in the entity and defining facts can be done for a single
isolated entity, or with two entities to carry on the facts for later comparison.
Generally this extraction means:
          </p>
          <ol class="simple">
           <li>
            <p>
             reading in the entity
            </p>
           </li>
           <li>
            <p>
             defining types of nodes and relations
            </p>
           </li>
           <li>
            <p>
             deriving the set
            </p>
           </li>
           <li>
            <p>
             saving to an output format
            </p>
           </li>
          </ol>
          <p>
           And a compspec implementation should provide either domain-specific or -agnostic
tools for making this easy to do.
          </p>
          <section id="domain">
           <h4 id="domain">
            Domain
            <a class="headerlink" href="#domain" title="Link to this heading">
             ¶
            </a>
           </h4>
           <p>
            Every comparison has a domain. For any given domain, the implementer should
decide what they want to model. Let’s inspect a simple Python function that has
a name, and a parameter with a default.
           </p>
           <div class="highlight-python notranslate">
            <div class="highlight">
             <pre><span></span><span class="k">def</span> <span class="nf">hello_world</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"Vanessa"</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">"Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">"</span>
</pre>
            </div>
           </div>
           <p>
            In this simple example, I might decide that I want to model the following ideas:
           </p>
           <ul class="simple">
            <li>
             <p>
              There is a function called “hello_world”
             </p>
            </li>
            <li>
             <p>
              The function “hello_world” has a parameter “name”
             </p>
            </li>
            <li>
             <p>
              The parmater “name” has type string
             </p>
            </li>
            <li>
             <p>
              The parmater “name” has a default of “Vanessa”
             </p>
            </li>
           </ul>
           <p>
            While the above is concretely a listing of facts (nodes) there are also implicit relationships!
For example:
           </p>
           <div class="highlight-bash notranslate">
            <div class="highlight">
             <pre><span></span><span class="w">                                                 </span>--&gt;<span class="w"> </span>has<span class="w"> </span>default<span class="w"> </span><span class="s2">"Vanessa"</span>
<span class="k">function</span><span class="w"> </span>hello_world<span class="w"> </span>--<span class="w"> </span>has<span class="w"> </span>parameter<span class="w"> </span>--&gt;<span class="w">  </span>name
<span class="w">                                                 </span>--&gt;<span class="w"> </span>is<span class="w"> </span><span class="nb">type</span><span class="w"> </span>string
</pre>
            </div>
           </div>
           <p>
            And the comparison spec is going to make it easy to flatten these ideas
into nodes and relationships (to define a graph) that can understand any set of
entities, attributes describing entities, or relationshps.
           </p>
          </section>
          <section id="node">
           <h4 id="node">
            Node
            <a class="headerlink" href="#node" title="Link to this heading">
             ¶
            </a>
           </h4>
           <p>
            A node is a flat set of four attributes that define an entity, including:
           </p>
           <ul class="simple">
            <li>
             <p>
              a
              <strong>
               namespace
              </strong>
              <a class="reference internal" href="#namespace">
               <span class="std std-ref">
                defined above
               </span>
              </a>
              .
             </p>
            </li>
            <li>
             <p>
              a unique identifier within the namespace to understand relationships with other nodes
             </p>
            </li>
            <li>
             <p>
              a generic name or type (e.g., function or func)
             </p>
            </li>
            <li>
             <p>
              a value that represents the particular type (e.g., “hello_world”)
             </p>
            </li>
           </ul>
           <p>
            And structured as follows:
           </p>
           <div class="highlight-default notranslate">
            <div class="highlight">
             <pre><span></span><span class="n">node</span><span class="p">(</span><span class="s2">"&lt;namespace&gt;"</span><span class="p">,</span> <span class="s2">"&lt;identifier&gt;"</span><span class="p">,</span> <span class="s2">"&lt;name&gt;"</span><span class="p">,</span> <span class="s2">"&lt;value&gt;"</span><span class="p">)</span><span class="o">.</span>
</pre>
            </div>
           </div>
           <p>
            As an example from the facts above, let’s say that our function is in a hypothetical
namespace “A.” We might define the following nodes:
           </p>
           <div class="highlight-asp notranslate">
            <div class="highlight">
             <pre><span></span>node("A", "id0", "func", "goodbye_world").
node("A", "id1", "func", "hello_world").

% Library A has these flattened attributes attributes
node("A", "id2", "parameter", "name").
node("A", "id3", "default", "Vanessa").
node("A", "id4", "type", "string").
</pre>
            </div>
           </div>
           <p>
            The above representation is in ASP (answer set programming or a logic program) but
you can imagine an implementation chooing another data structure, e.g.:
           </p>
           <div class="highlight-python notranslate">
            <div class="highlight">
             <pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">"namespace"</span><span class="p">:</span> <span class="s2">"A"</span><span class="p">,</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"id0"</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"func"</span><span class="p">,</span>
        <span class="s2">"value"</span><span class="p">:</span> <span class="s2">"hello_world"</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre>
            </div>
           </div>
           <p>
            Given a set of nodes, it should be possible to derive a list of unique node types
within a namespace via:
           </p>
           <div class="highlight-asp notranslate">
            <div class="highlight">
             <pre><span></span>nodes(Namespace, Type) := node(Namespace, _, Type, _).
</pre>
            </div>
           </div>
          </section>
          <section id="relation">
           <h4 id="relation">
            Relation
            <a class="headerlink" href="#relation" title="Link to this heading">
             ¶
            </a>
           </h4>
           <p>
            A relation is simple - it describes the relationship between two nodes.
To continue the example above:
           </p>
           <div class="highlight-asp notranslate">
            <div class="highlight">
             <pre><span></span>% function hello_world has parameter "name"
relation("A", "id1", "has", "id2").

% parameter name has default Vanessa
relation("A", "id2", "has", "id3").

% parameter name has type string
relation("A", "id2", "has", "id4").
</pre>
            </div>
           </div>
           <p>
            The relations above are defined by a type, with a default type of “has” to indicate a parent to child
relationships, a parent entity “has” a child entity and points to it.
Indeed, the relations are intended to be generated by a tool, and are primarily for use
within an implementation. The identifiers within a namespace for both nodes and relations
are scoped to that namespace.
           </p>
           <p>
            Given a set of relations, it should be possible to derive a list of unique relation types
within a namespace via:
           </p>
           <div class="highlight-asp notranslate">
            <div class="highlight">
             <pre><span></span>relations(Namespace, Relation) := relation(Namespace, _, Relation, _).
</pre>
            </div>
           </div>
          </section>
         </section>
         <section id="diff">
          <h3 id="diff">
           Diff
           <a class="headerlink" href="#diff" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           Two extractions can be further compared, such as with a diff. A diff
is exactly that - we essentially have two graphs and subtract them to understand
what is added, removed, or changed. Unchanged items are generally not important
to show. For example, let’s say we want to compare two entities. We’d first
extract facts, and then (given a specification for doing a diff) we would run the diff:
          </p>
          <div class="highlight-default notranslate">
           <div class="highlight">
            <pre><span></span><span class="p">[</span><span class="n">entity</span> <span class="n">A</span><span class="p">]</span> <span class="o">--</span> <span class="n">extraction</span> <span class="o">--&gt;</span> <span class="p">[</span><span class="n">facts</span> <span class="n">A</span><span class="p">]</span>
                                           <span class="o">--</span> <span class="n">facts</span> <span class="n">diff</span> <span class="o">--&gt;</span> <span class="p">[</span><span class="n">change</span> <span class="nb">set</span><span class="p">]</span> 
<span class="p">[</span><span class="n">entity</span> <span class="n">B</span><span class="p">]</span> <span class="o">--</span> <span class="n">extraction</span> <span class="o">--&gt;</span> <span class="p">[</span><span class="n">facts</span> <span class="n">B</span><span class="p">]</span>
</pre>
           </div>
          </div>
          <p>
           The result of the diff is a set of additions, subtractions, and changes, or more generally,
a change set. In more abstract terms:
          </p>
          <div class="highlight-default notranslate">
           <div class="highlight">
            <pre><span></span><span class="n">A</span> 
   <span class="o">--&gt;</span> <span class="n">A</span><span class="o">-</span><span class="n">B</span> <span class="o">--&gt;</span> <span class="n">change</span> <span class="nb">set</span>
<span class="n">B</span>
</pre>
           </div>
          </div>
          <p>
           This means the direction of the diff should be “changes resulting in moving from A to B.”
          </p>
          <section id="rules">
           <h4 id="rules">
            Rules
            <a class="headerlink" href="#rules" title="Link to this heading">
             ¶
            </a>
           </h4>
           <p>
            The composition specification for doing a diff “diffspec” should provide the following
functionality. Note that some of these are
            <em>
             optional
            </em>
            but suggested. Given an entity
in namespace A, and another in namespace B, each with a corpus extracted, a diff should:
           </p>
           <section id="assertion-of-difference">
            <h5 id="assertion-of-difference">
             Assertion of Difference
             <a class="headerlink" href="#assertion-of-difference" title="Link to this heading">
              ¶
             </a>
            </h5>
            <p>
             Make an assertion that the two comparison entries are different
             <em>
              optional
             </em>
            </p>
            <div class="highlight-asp notranslate">
             <div class="highlight">
              <pre><span></span>is_different(A, B) :- is_a(A), is_b(B), A != B.
</pre>
             </div>
            </div>
           </section>
           <section id="changed-node-values">
            <h5 id="changed-node-values">
             Changed Node Values
             <a class="headerlink" href="#changed-node-values" title="Link to this heading">
              ¶
             </a>
            </h5>
            <p>
             A node is asserted to have a change of value if:
            </p>
            <ul class="simple">
             <li>
              <p>
               Given namespaces A and B for comparison
              </p>
             </li>
             <li>
              <p>
               the node exists in A (based on name)
              </p>
             </li>
             <li>
              <p>
               the node exists in B (based on name)
              </p>
             </li>
             <li>
              <p>
               there exists a nearest shared parent (one level up)
              </p>
             </li>
             <li>
              <p>
               the values are different.
              </p>
             </li>
            </ul>
            <div class="highlight-asp notranslate">
             <div class="highlight">
              <pre><span></span>changed_node_value(A, B, EntityA, EntityB, Name, ValueA, ValueB) :-
    is_a(A), is_b(B),
    node(A, EntityA, Name, ValueA),
    node(B, EntityB, Name, ValueB),
    shared_parent(EntityA, EntityB, Name),
    ValueA != ValueB.
</pre>
             </div>
            </div>
           </section>
           <section id="removed-nodes">
            <h5 id="removed-nodes">
             Removed Nodes
             <a class="headerlink" href="#removed-nodes" title="Link to this heading">
              ¶
             </a>
            </h5>
            <p>
             A node is asserted to be removed in B if:
            </p>
            <ul class="simple">
             <li>
              <p>
               Given namespaces A and B for comparison
              </p>
             </li>
             <li>
              <p>
               the node exists in A (based on name, and we don’t care about value)
              </p>
             </li>
             <li>
              <p>
               the node does not exist in B (same)
              </p>
             </li>
             <li>
              <p>
               there exists a nearest parent (one level up)
              </p>
             </li>
            </ul>
            <div class="highlight-asp notranslate">
             <div class="highlight">
              <pre><span></span>What is removed if we move from A to B? 
% This covers anything with a parent (not a root)
removed_node(A, B, Name) :-
    is_a(A), is_b(B),
    node(A, NodeA, Name, _),
    not node(B, NodeB, Name, _),
    shared_parent_missing(NodeA, NodeB, Name).
</pre>
             </div>
            </div>
           </section>
           <section id="added-nodes">
            <h5 id="added-nodes">
             Added Nodes
             <a class="headerlink" href="#added-nodes" title="Link to this heading">
              ¶
             </a>
            </h5>
            <p>
             A node is asserted to be added in B if:
            </p>
            <ul class="simple">
             <li>
              <p>
               Given namespaces A and B for comparison
              </p>
             </li>
             <li>
              <p>
               the node exists in B (based on name, and we don’t care about value)
              </p>
             </li>
             <li>
              <p>
               the node does not exist in A (same)
              </p>
             </li>
             <li>
              <p>
               the node is not represented in the set of changed values
              </p>
             </li>
            </ul>
            <div class="highlight-asp notranslate">
             <div class="highlight">
              <pre><span></span>% What is added if we move from A to B?
% We have the entity in B but not A
added_node(A, B, Name, Value) :- 
    is_a(A), is_b(B),
    node(A, _, Name, Value),
    not node(B, _, Name, Value),
    not changed_node_value(A, B, _, _, Name, _, _).    
</pre>
             </div>
            </div>
            <p>
             Of course the above require supporting rules, which is up to the implementation (and we
will provide in the implementations here. These rules are the basis of a comparison,
and the model to derive a diff.
            </p>
           </section>
          </section>
         </section>
         <section id="implementation">
          <h3 id="implementation">
           Implementation
           <a class="headerlink" href="#implementation" title="Link to this heading">
            ¶
           </a>
          </h3>
          <p>
           In practice, an implementation should simply allow a user to define these relations and
nodes, and then output a change set. The change set should include groups of rules that are “true,”
e.g.,:
          </p>
          <ul class="simple">
           <li>
            <p>
             added_node
            </p>
           </li>
           <li>
            <p>
             removed_node
            </p>
           </li>
           <li>
            <p>
             changed_node_value
            </p>
           </li>
          </ul>
         </section>
        </section>
       </section>
      </article>
     </div>
    </div>
   </main>
  </div>
  <footer class="md-footer">
   <div class="md-footer-nav">
    <nav class="md-footer-nav__inner md-grid">
     <a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="user-guide.html" rel="prev" title="User Guide">
      <div class="md-flex__cell md-flex__cell--shrink">
       <i class="md-icon md-icon--arrow-back md-footer-nav__button">
       </i>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
       <span class="md-flex__ellipsis">
        <span class="md-footer-nav__direction">
         "Previous"
        </span>
        User Guide
       </span>
      </div>
     </a>
     <a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="../compatibility/index.html" rel="next" title="Container and Application Compatibility">
      <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
       <span class="md-flex__ellipsis">
        <span class="md-footer-nav__direction">
         "Next"
        </span>
        Container and Application Compatibility
       </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
       <i class="md-icon md-icon--arrow-forward md-footer-nav__button">
       </i>
      </div>
     </a>
    </nav>
   </div>
   <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
     <div class="md-footer-copyright">
      <div class="md-footer-copyright__highlight">
       © Copyright 2022-2024, Vanessa Sochat.
      </div>
      Last updated on
              Jun 05, 2024.
      <br/>
      Created using
      <a href="http://www.sphinx-doc.org/">
       Sphinx
      </a>
      7.3.7.
             and
      <a href="https://github.com/bashtage/sphinx-material/">
       Material for
              Sphinx
      </a>
     </div>
    </div>
   </div>
  </footer>
  <script src="../../_static/javascripts/application.js">
  </script>
  <script>
   app.initialize({version: "1.0.4", url: {base: ".."}})
  </script>
 </body>
</html>
